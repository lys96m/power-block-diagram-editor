# UI ガイド

## レイアウト

- 上ヘッダー / 左パレット / 中央キャンバス（React Flow） / 右プロパティパネル / 下ステータスバー。
- ヘッダー: 新規/開く/保存、エクスポート（SVG/PNG/PDF/JSON/CSV）、Undo/Redo。
- パレット: Type A/B/C をカテゴリで表示し、ドラッグ＆ドロップまたはクリック追加。
- キャンバス: グリッド背景、直交エッジ、状態に応じたエッジ色（OK/未割当/NG）。パン/ズーム標準有効、スナップ/グリッド表示トグル。
- 右パネル:
  - ブロック選択: ラベル編集、type別 rating 入力、ID は編集不可、props/part_id は折りたたみ可能な詳細欄。
  - 接続選択: From/To 表示、net 選択ドロップダウン、新規 net 作成ボタン。
    - Net 名称変更、種別(AC/DC/SIGNAL)、電圧/相数/許容差を編集可能
    - 他のエッジが参照中の net は削除不可（未割当か別 net に付け替えてから削除）
    - 表示用用語を統一: 未割当 = "Unassigned edges"、参照されていない net = "Orphan nets"
- ステータスバー: 選択中 net の電流合計/容量比、エラー件数、未確定負荷数。

## フィードバック/検証

- 検証結果は右パネルかトーストで表示し、クリックで対象へジャンプ。
- net 割当変更後はエッジ色とステータスバーの集計を即時更新（目標 100ms 以内）。
- 未確定負荷（I_in/P_in 未入力）は警告としてステータスに表示し、関連エッジは灰色で表示。

## スタイリング

- MUI テーマでカラー/タイポを統一。ダーク/ライトの切替は後日検討。
- レスポンシブ: 幅が狭い場合、右/左パネルはドロワー化してキャンバスを優先。
- アクセシビリティ: フォーカス可視化、フォームラベル必須、コントラスト AA 目標。

## 操作性

- 選択: クリックで単一、ドラッグで範囲選択。
- 移動: ノードドラッグ、スペース/中ボタンでパン、ホイールでズーム（Ctrl+ホイール抑制を検討）。
- ショートカット候補: `Ctrl/Cmd+S` 保存、`Del` 削除、`Ctrl/Cmd+Z` Undo、`Ctrl/Cmd+Y` Redo、`V` 検証実行。

## 今後の宿題

- 具体的なポート配置・ノード形状のデザイン。
- 未定値（I/P）の入力 UX と警告表示。
- エッジ色/凡例の確定、テーマ詳細（カラー、アイコンセット）。
